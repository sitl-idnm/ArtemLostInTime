# Artem Lost In Time API

Простой API и веб-интерфейс для отслеживания времени ухода и прихода сотрудников.

## Функционал

*   Добавление записи об уходе (время ухода, планируемая длительность).
*   Добавление записи о приходе (время прихода).
*   Автоматический расчет времени опоздания.
*   Хранение данных в `data.json`.
*   Простой веб-интерфейс (`admin.html`) для управления записями, защищенный Basic Auth.
*   API эндпоинт (`/entries`) для получения данных (например, для внешнего виджета).

## Требования

*   [Node.js](https://nodejs.org/) (рекомендуется версия 18 или выше, например, 20.x LTS)
*   [npm](https://www.npmjs.com/) (обычно идет в комплекте с Node.js)
*   [Git](https://git-scm.com/)

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/sitl-idnm/ArtemLostInTime.git
    cd ArtemLostInTime
    ```
2.  **Установите зависимости:**
    ```bash
    npm install
    ```

## Настройка

1.  **Настройте учетные данные для админ-панели:**
    *   Откройте файл `server.js`.
    *   Найдите строку `const adminUser = { 'admin': 'password' };`.
    *   **Обязательно** замените `'admin'` и `'password'` на ваши надежные имя пользователя и пароль.

## Запуск

1.  **Запустите API сервер:**
    ```bash
    node server.js
    ```
    Сервер будет запущен по адресу `http://localhost:3001`.

## Использование

1.  **Админ-панель:**
    *   Откройте в браузере `http://localhost:3001/admin.html`.
    *   Введите имя пользователя и пароль, которые вы указали в `server.js`.
    *   Используйте форму для добавления записей об уходе.
    *   Нажимайте кнопку "Пришел" в таблице, чтобы отметить возвращение.
2.  **API Эндпоинт:**
    *   Данные доступны по адресу `http://localhost:3001/entries` (GET запрос).
    *   Возвращает JSON-массив всех записей, отсортированных по времени ухода (сначала новые).
    *   Этот эндпоинт можно использовать для интеграции с другими системами или виджетами.

## Структура данных (`data.json`)

Каждая запись представляет собой объект:

```json
{
  "id": "1678886400000", // Уникальный ID (timestamp)
  "departureTime": "2023-03-15T12:00:00.000Z", // Время ухода (ISO 8601)
  "estimatedDuration": 60, // Планируемая длительность отсутствия (в минутах)
  "returnTime": "2023-03-15T13:15:00.000Z", // Время прихода (ISO 8601) или null
  "lateBy": 15 // Опоздание (в минутах) или null
}
```

**Важно:** Файл `data.json` добавлен в `.gitignore` и не будет отслеживаться Git. Создайте пустой файл `data.json` (`[]`) в корне проекта при первом запуске, если его нет (сервер сделает это автоматически при первом чтении, если файла не существует).
